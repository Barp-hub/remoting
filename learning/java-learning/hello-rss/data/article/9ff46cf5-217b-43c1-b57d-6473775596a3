<div dir="ltr" style="text-align: left;" trbidi="on">Hello Everyone,<br /><br />Below Is a SQL statement for the (procure to pay life cycle), it is build mainly on the PO's<br />It fetches the requisitions, receipts, PO's, Invoices and then the Payments<br /><br />------------------------------------------------------------------------------<br />SELECT&nbsp;&nbsp; prha.segment1 req_number, prla.line_num req_line_num,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; prha.creation_date req_date, pha.segment1 po_number,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; pha.creation_date po_date, aps.vendor_name supplier_name,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; msi.segment1 || '-' || msi.segment2 item, pla.line_num po_line_num,<br /><br /><a name='more'></a><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; pla.quantity qty, pla.unit_price,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; NVL (pla.quantity, 1) * pla.unit_price po_line_amount,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; rsh.receipt_num grn_num, rsh.creation_date grn_date,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; rsl.quantity_received rcv_qty, aia.invoice_num, aia.invoice_date,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; aia.invoice_amount, aca.check_number payment_num,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; aca.check_date payment_date, aip.amount payment_amount<br />&nbsp;&nbsp;&nbsp; FROM po_headers_all pha,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ap_suppliers aps,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; po_lines_all pla,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; po_line_locations_all plla,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; po_distributions_all pda,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mtl_system_items_b msi,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; po_req_distributions_all prda,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; po_requisition_lines_all prla,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; po_requisition_headers_all prha,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; rcv_shipment_lines rsl,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; rcv_shipment_headers rsh,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ap_invoice_distributions_all aid,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ap_invoices_all aia,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ap_invoice_payments_all aip,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ap_checks_all aca<br />&nbsp;&nbsp; WHERE 1 = 1<br />&nbsp;&nbsp;&nbsp;&nbsp; AND pha.vendor_id = aps.vendor_id(+)<br />---------------------------------<br />&nbsp;&nbsp;&nbsp;&nbsp; AND pha.po_header_id = pla.po_header_id<br />&nbsp;&nbsp;&nbsp;&nbsp; AND pla.po_header_id = plla.po_header_id<br />&nbsp;&nbsp;&nbsp;&nbsp; AND pla.po_line_id = plla.po_line_id<br />&nbsp;&nbsp;&nbsp;&nbsp; AND plla.po_header_id = pda.po_header_id<br />&nbsp;&nbsp;&nbsp;&nbsp; AND plla.po_line_id = pda.po_line_id<br />&nbsp;&nbsp;&nbsp;&nbsp; AND plla.line_location_id = pda.line_location_id<br />&nbsp;&nbsp;&nbsp;&nbsp; AND pla.item_id = msi.inventory_item_id<br />&nbsp;&nbsp;&nbsp;&nbsp; AND pda.destination_organization_id = msi.organization_id<br />---------------------------------<br />&nbsp;&nbsp;&nbsp;&nbsp; AND pda.req_distribution_id = prda.distribution_id(+)<br />&nbsp;&nbsp;&nbsp;&nbsp; AND prda.requisition_line_id = prla.requisition_line_id(+)<br />&nbsp;&nbsp;&nbsp;&nbsp; AND prla.requisition_header_id = prha.requisition_header_id(+)<br />---------------------------------<br />--&nbsp;&nbsp;&nbsp;&nbsp; AND pda.po_distribution_id = rsl.po_distribution_id(+)<br />&nbsp;&nbsp;&nbsp;&nbsp; AND plla.line_location_id = rsl.po_line_location_id(+)<br />&nbsp;&nbsp;&nbsp;&nbsp; AND plla.po_line_id = rsl.po_line_id(+)<br />&nbsp;&nbsp;&nbsp;&nbsp; AND plla.po_header_id = rsl.po_header_id(+)<br />--&nbsp;&nbsp;&nbsp;&nbsp; AND plla.org_id = rsl.to_organization_id(+)<br />&nbsp;&nbsp;&nbsp;&nbsp; AND rsl.shipment_header_id = rsh.shipment_header_id(+)<br />&nbsp;&nbsp;&nbsp;&nbsp; AND (&nbsp;&nbsp; rsl.shipment_line_status_code &lt;&gt; 'EXPECTED'<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; OR rsl.shipment_line_status_code IS NULL<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; )<br />---------------------------------<br />&nbsp;&nbsp;&nbsp;&nbsp; AND pda.po_distribution_id = aid.po_distribution_id(+)<br />---------------------------------<br />&nbsp;&nbsp;&nbsp;&nbsp; AND aid.invoice_id = aia.invoice_id(+)<br />&nbsp;&nbsp;&nbsp;&nbsp; AND aia.invoice_id = aip.invoice_id(+)<br />&nbsp;&nbsp;&nbsp;&nbsp; AND aip.check_id = aca.check_id(+)<br />---------------------------------<br />---------------------------------<br />&nbsp;&nbsp;&nbsp;&nbsp; AND (TRIM (pha.creation_date) &gt;= :p_po_date_from<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; OR :p_po_date_from IS NULL<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; )<br />&nbsp;&nbsp;&nbsp;&nbsp; AND (TRIM (pha.creation_date) &lt;= :p_po_date_to OR :p_po_date_to IS NULL)<br />&nbsp;&nbsp;&nbsp;&nbsp; AND (pha.vendor_id = :p_vendor_id OR :p_vendor_id IS NULL)<br />&nbsp;&nbsp;&nbsp;&nbsp; AND (pha.po_header_id = :p_po_header_id OR :p_po_header_id IS NULL)<br />&nbsp;&nbsp;&nbsp;&nbsp; AND (pha.segment1 = :p_segment1 OR :p_segment1 IS NULL)<br />&nbsp;&nbsp;&nbsp;&nbsp; AND (&nbsp;&nbsp; msi.segment1 || '-' || msi.segment2 = :p_item_code<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; OR :p_item_code IS NULL<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; )<br />&nbsp;&nbsp;&nbsp;&nbsp; AND (&nbsp;&nbsp; msi.inventory_item_id = :p_inventory_item_id<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; OR :p_inventory_item_id IS NULL<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; )<br />&nbsp;&nbsp;&nbsp;&nbsp; AND (pda.destination_organization_id = :p_org_id OR :p_org_id IS NULL)<br />---------------------------------<br />---------------------------------<br />ORDER BY TO_NUMBER (pha.segment1), TO_NUMBER (pla.line_num)</div>